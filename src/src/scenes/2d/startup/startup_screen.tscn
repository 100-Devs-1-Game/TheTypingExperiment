[gd_scene load_steps=2 format=3 uid="uid://brf0taii070nf"]

[sub_resource type="GDScript" id="GDScript_7u0li"]
script/source = "extends Control

@onready var status_label: Label = $CenterContainer/VBoxContainer/StatusLabel
@onready var progress_bar: ProgressBar = $CenterContainer/VBoxContainer/ProgressBar
@onready var company_logo: Label = $CenterContainer/VBoxContainer/CompanyLogo
@onready var product_name: Label = $CenterContainer/VBoxContainer/ProductName
@onready var subtitle: Label = $CenterContainer/VBoxContainer/Subtitle
@onready var copyright_label: Label = $CenterContainer/VBoxContainer/Copyright

var startup_messages = [
	\"Initializing keyboard drivers...\",
	\"Loading word databases...\",
	\"Calibrating typing metrics...\",
	\"Configuring user interface...\",
	\"Performing system checks...\",
	\"Starting TypingMaster Pro v2.3...\"
]

var current_message_index = 0
var startup_timer: Timer

func _ready():
	setup_retro_theme()
	start_startup_sequence()

func setup_retro_theme():
	var green_color = Color(0, 1, 0)
	var amber_color = Color(1, 0.8, 0)

	company_logo.modulate = green_color
	product_name.modulate = green_color
	subtitle.modulate = amber_color
	status_label.modulate = green_color
	copyright_label.modulate = Color(0, 0.7, 0)

	progress_bar.modulate = green_color

func start_startup_sequence():
	startup_timer = Timer.new()
	add_child(startup_timer)
	startup_timer.timeout.connect(_update_startup_progress)

	progress_bar.value = 0
	_update_startup_progress()

func _update_startup_progress():
	if current_message_index < startup_messages.size():
		status_label.text = startup_messages[current_message_index]
		progress_bar.value = (float(current_message_index) / float(startup_messages.size())) * 100.0

		current_message_index += 1

		var delay = randf_range(0.8, 2.0)
		if current_message_index == 3:
			delay = randf_range(2.0, 4.0)

		startup_timer.wait_time = delay
		startup_timer.start()
	else:
		complete_startup()

func complete_startup():
	status_label.text = \"Ready.\"
	progress_bar.value = 100

	await get_tree().create_timer(1.0).timeout

	# Start Day 1 of the corruption story
	get_tree().change_scene_to_file(\"res://src/scenes/days/Day1.tscn\")
"

[node name="StartupScreen" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_7u0li")

[node name="Background" type="ColorRect" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="CenterContainer" type="CenterContainer" parent="."]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VBoxContainer" type="VBoxContainer" parent="CenterContainer"]
layout_mode = 2

[node name="CompanyLogo" type="Label" parent="CenterContainer/VBoxContainer"]
layout_mode = 2
text = "Cognitive Dynamics"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Spacer1" type="Control" parent="CenterContainer/VBoxContainer"]
custom_minimum_size = Vector2(0, 32)
layout_mode = 2

[node name="ProductName" type="Label" parent="CenterContainer/VBoxContainer"]
layout_mode = 2
text = "Welcome to TypingMaster Pro v2.3"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Spacer2" type="Control" parent="CenterContainer/VBoxContainer"]
custom_minimum_size = Vector2(0, 16)
layout_mode = 2

[node name="Subtitle" type="Label" parent="CenterContainer/VBoxContainer"]
layout_mode = 2
text = "Thank you for choosing Cognitive Dynamics software solutions"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Spacer3" type="Control" parent="CenterContainer/VBoxContainer"]
custom_minimum_size = Vector2(0, 48)
layout_mode = 2

[node name="StatusLabel" type="Label" parent="CenterContainer/VBoxContainer"]
layout_mode = 2
text = "Initializing..."
horizontal_alignment = 1
vertical_alignment = 1

[node name="ProgressBar" type="ProgressBar" parent="CenterContainer/VBoxContainer"]
custom_minimum_size = Vector2(300, 20)
layout_mode = 2
show_percentage = false

[node name="Spacer4" type="Control" parent="CenterContainer/VBoxContainer"]
custom_minimum_size = Vector2(0, 32)
layout_mode = 2

[node name="Copyright" type="Label" parent="CenterContainer/VBoxContainer"]
layout_mode = 2
text = "Â© 1994 Cognitive Dynamics Inc."
horizontal_alignment = 1
vertical_alignment = 1
